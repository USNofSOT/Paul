#updatemembers
@bot.tree.command(name="updatemembers", description="Update the Sailorinfo table with current server members")
@commands.has_any_role("Board of Admiralty", "Senior Officer", "Junior Officer")
async def updatemembers(interaction: discord.Interaction):
    await interaction.response.defer(ephemeral=True)  # Defer the response for potentially long operation

    try:
        guild_id = interaction.guild.id  # Get the server ID
        guild = bot.get_guild(guild_id)  # Get the server object
        member_count = 0

        for member in guild.members:
            await asyncio.sleep(.1)  # Introduce a .1second delay to prevent blocking
            if not db_manager.discord_id_exists(member.id):
                db_manager.add_discord_id(member.id)
                member_count += 1

        await interaction.followup.send(f"Updated Sailorinfo with {member_count} new members.")

    except Exception as e:
        await interaction.followup.send(f"An error occurred: {e}")