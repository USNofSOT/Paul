"""Voyage types, and more counts

Revision ID: e8cf3903e744
Revises: 6ffd8525c32d
Create Date: 2025-03-26 18:25:02.342079

"""

from typing import Sequence, Union

import sqlalchemy as sa
from alembic import op
from sqlalchemy import Boolean, Enum, Integer
from sqlalchemy.dialects.mysql import BIGINT, DATETIME, VARCHAR

# revision identifiers, used by Alembic.
revision: str = "e8cf3903e744"
down_revision: Union[str, None] = "6ffd8525c32d"
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    awards_table = op.create_table(
        "awards",
        sa.Column("id", Integer, primary_key=True, autoincrement=True),
        sa.Column("name", VARCHAR(64), nullable=False),
        sa.Column("description", VARCHAR(255), nullable=True),
        sa.Column(
            "category",
            Enum(
                "VOYAGE",
                "HOSTED",
                "COMBAT",
                "TRAINING",
                "CONDUCT",
                "RECRUIT",
                "ATTENDANCE",
                "SERVICE",
                "MISCELLANEOUS",
                name="awardcategory",
            ),
            nullable=True,
            server_default="Miscellaneous",
        ),
        sa.Column("threshold", Integer, nullable=True),
        sa.Column("ranks_responsible", VARCHAR(64), nullable=True),
        sa.Column("role_id", BIGINT, nullable=True),
        sa.Column("channel_thread_id", BIGINT, nullable=True),
        sa.Column("embed_id", BIGINT, nullable=True),
        sa.Column("is_streak", Boolean),
        sa.Column("is_tiered", Boolean, server_default="0"),
        sa.Column("is_hidden", Boolean, server_default="0"),
        sa.Column("only_show_for_recipient", Boolean, server_default="0"),
        sa.Column("created_at", DATETIME, nullable=True),
        sa.Column("edited_at", DATETIME, nullable=True),
    )
    op.create_table(
        "award_recipients",
        sa.Column("id", Integer, primary_key=True, autoincrement=True),
        sa.Column("target_id", sa.BIGINT, sa.ForeignKey("sailor.discord_id")),
        sa.Column("moderator_id", sa.BIGINT, sa.ForeignKey("sailor.discord_id")),
        sa.Column("award_id", sa.Integer, sa.ForeignKey("awards.id")),
        sa.Column("created_at", DATETIME, nullable=False),
        sa.Column("edited_at", DATETIME, nullable=True),
    )
    op.bulk_insert(
        table=awards_table,
        rows=[
            {
                "name": "Citation of Voyages",
                "description": "Awarded for completing 5 voyages.",
                "category": "VOYAGE",
                "threshold": 5,
                "ranks_responsible": "E-6+",
                "role_id": 934090102735536188,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514303936561183,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Legion of Voyages",
                "description": "Awarded for completing 25 voyages.",
                "category": "VOYAGE",
                "threshold": 25,
                "ranks_responsible": "E-7+",
                "role_id": 983412707912998942,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514303936561183,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Honorable Voyager Medal",
                "description": "Awarded for completing 50 voyages.",
                "category": "VOYAGE",
                "threshold": 50,
                "ranks_responsible": "O-1+",
                "role_id": 1059271717836566588,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514303936561183,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Meritorious Voyager Medal",
                "description": "Awarded for completing 100 voyages.",
                "category": "VOYAGE",
                "threshold": 100,
                "ranks_responsible": "O-4+",
                "role_id": 1059240151852797993,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514303936561183,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Admirable Voyager Medal",
                "description": "Awarded for completing 200 voyages.",
                "category": "VOYAGE",
                "threshold": 200,
                "ranks_responsible": "O-7+",
                "role_id": 1140637598457544857,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514303936561183,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Sea Service Ribbon",
                "description": "Awarded for hosting 25 voyages.",
                "category": "HOSTED",
                "threshold": 25,
                "ranks_responsible": "E-7+",
                "role_id": 1140740078025576569,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514303936561183,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Maritime Service Medal",
                "description": "Awarded for hosting 50 voyages.",
                "category": "HOSTED",
                "threshold": 50,
                "ranks_responsible": "O-1+",
                "role_id": 1140740079808155688,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514303936561183,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Legendary Service Medal",
                "description": "Awarded for hosting 100 voyages.",
                "category": "HOSTED",
                "threshold": 100,
                "ranks_responsible": "O-4+",
                "role_id": 1140740081594941460,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514303936561183,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Admirable Service Medal",
                "description": "Awarded for hosting 200 voyages.",
                "category": "HOSTED",
                "threshold": 200,
                "ranks_responsible": "O-7+",
                "role_id": 1205129048309637170,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514303936561183,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Citation of Combat",
                "description": "Awarded for reaching a streak of 2",
                "category": "COMBAT",
                "threshold": 2,
                "ranks_responsible": "E-6+",
                "role_id": 944648920083079189,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514373751017586,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Legion of Combat",
                "description": "Awarded for reaching a streak of 3",
                "category": "COMBAT",
                "threshold": 3,
                "ranks_responsible": "E-7+",
                "role_id": 1140638151174541502,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514373751017586,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Honorable Combat Action",
                "description": "Awarded for reaching a streak of 5",
                "category": "COMBAT",
                "threshold": 5,
                "ranks_responsible": "O-1+",
                "role_id": 1140638148217544714,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514373751017586,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Meritorious Combat Action",
                "description": "Awarded for reaching a streak of 7",
                "category": "COMBAT",
                "threshold": 7,
                "ranks_responsible": "O-4+",
                "role_id": 1140740442334433301,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514373751017586,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Admirable Combat Action",
                "description": "Awarded for reaching a streak of 10",
                "category": "COMBAT",
                "threshold": 10,
                "ranks_responsible": "O-7+",
                "role_id": 1140638153892450406,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514373751017586,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Honorable Training Ribbon",
                "description": "Awarded for attending 25 training sessions.",
                "category": "TRAINING",
                "threshold": 25,
                "ranks_responsible": "CO/XO of NRC or NETC",
                "role_id": 972552284145860619,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514591854559263,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Meritorious Training Ribbon",
                "description": "Awarded for attending 50 training sessions.",
                "category": "TRAINING",
                "threshold": 50,
                "ranks_responsible": "CO/XO of NRC or NETC",
                "role_id": 1205124628712792064,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514591854559263,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Admirable Training Ribbon",
                "description": "Awarded for attending 100 training sessions.",
                "category": "TRAINING",
                "threshold": 100,
                "ranks_responsible": "CO/XO of NRC or NETC",
                "role_id": 1205126555467255818,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514591854559263,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Citation of Conduct",
                "description": "Awarded for basic conduct",
                "category": "CONDUCT",
                "threshold": 1,
                "ranks_responsible": "E-6+",
                "role_id": 944648745503563806,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514180208787519,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Legion of Conduct",
                "description": "Awarded for better conduct",
                "category": "CONDUCT",
                "threshold": 2,
                "ranks_responsible": "E-7+",
                "role_id": 1140739251739308042,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514180208787519,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Honorable Conduct Medal",
                "description": "Awarded for Honorable conduct",
                "category": "CONDUCT",
                "threshold": 3,
                "ranks_responsible": "O-1+",
                "role_id": 1140739253895180378,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514180208787519,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Meritorious Conduct Medal",
                "description": "Awarded for Meritorious conduct",
                "category": "CONDUCT",
                "threshold": 4,
                "ranks_responsible": "O-4+",
                "role_id": 1140739256214622329,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514180208787519,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Admirable Conduct Medal",
                "description": "Awarded for Admirable conduct",
                "category": "CONDUCT",
                "threshold": 5,
                "ranks_responsible": "O-7+",
                "role_id": 1140739259003850752,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514180208787519,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Recruit Medal",
                "description": "Awarded for recruiting 15 members.",
                "category": "RECRUIT",
                "threshold": 15,
                "ranks_responsible": "CO/XO of NRC",
                "role_id": 934071290875232267,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514591854559263,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Citation of Attendance",
                "description": "Awarded for attending 1 events.",
                "category": "ATTENDANCE",
                "threshold": 1,
                "ranks_responsible": "Head or XO of Scheduling Department",
                "role_id": 1286548679561445387,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514591854559263,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Legion of Attendance",
                "description": "Awarded for attending 2 events.",
                "category": "ATTENDANCE",
                "threshold": 2,
                "ranks_responsible": "Head or XO of Scheduling Department",
                "role_id": 1286548851028656178,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514591854559263,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Meritorious Attendance Medal",
                "description": "Awarded for attending 4 events.",
                "category": "ATTENDANCE",
                "threshold": 4,
                "ranks_responsible": "Head or XO of Scheduling Department",
                "role_id": 1286548979235950602,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514591854559263,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Admirable Attendance Medal",
                "description": "Awarded for attending 6 events.",
                "category": "ATTENDANCE",
                "threshold": 6,
                "ranks_responsible": "Head or XO of Scheduling Department",
                "role_id": 1286549059288436757,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514591854559263,
                "is_streak": 0,
                "is_tiered": 1,
            },
            {
                "name": "Four Months Service Stripes",
                "description": "Awarded for serving for 4 months.",
                "category": "SERVICE",
                "threshold": 4,
                "ranks_responsible": "CO+",
                "role_id": 995304238773190667,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514684506734643,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Six Months Service Stripes",
                "description": "Awarded for serving for 6 months.",
                "category": "SERVICE",
                "threshold": 6,
                "ranks_responsible": "CO+",
                "role_id": 1083148237373964319,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514684506734643,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Eight Months Service Stripes",
                "description": "Awarded for serving for 8 months.",
                "category": "SERVICE",
                "threshold": 8,
                "ranks_responsible": "CO+",
                "role_id": 1023358727358795786,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514684506734643,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Twelve Months Service Stripes",
                "description": "Awarded for serving for 12 months.",
                "category": "SERVICE",
                "threshold": 12,
                "ranks_responsible": "CO+",
                "role_id": 1066065470580609046,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514684506734643,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Eighteen Months Service Stripes",
                "description": "Awarded for serving for 18 months.",
                "category": "SERVICE",
                "threshold": 18,
                "ranks_responsible": "CO+",
                "role_id": 1202901182528364624,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514684506734643,
                "is_streak": 1,
                "is_tiered": 1,
            },
            {
                "name": "Twenty-Four Months Service Stripes",
                "description": "Awarded for serving for 24 months.",
                "category": "SERVICE",
                "threshold": 24,
                "ranks_responsible": "CO+",
                "role_id": 1204423843062485053,
                "channel_thread_id": 1292510151219347519,
                "embed_id": 1292514684506734643,
                "is_streak": 1,
                "is_tiered": 1,
            },
        ],
    )


def downgrade() -> None:
    op.drop_table("awards")
    op.drop_table("award_recipients")
